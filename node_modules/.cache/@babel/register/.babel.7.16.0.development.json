{
  "{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Gael Valdez\\\\OneDrive\\\\Documentos\\\\Gael Trabajos\\\\Cuatrimeste 7\\\\Programación Concurrente\\\\video\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\Gael Valdez\\\\OneDrive\\\\Documentos\\\\Gael Trabajos\\\\Cuatrimeste 7\\\\Programación Concurrente\\\\video\",\"filename\":\"C:\\\\Users\\\\Gael Valdez\\\\OneDrive\\\\Documentos\\\\Gael Trabajos\\\\Cuatrimeste 7\\\\Programación Concurrente\\\\video\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\Gael Valdez\\\\OneDrive\\\\Documentos\\\\Gael Trabajos\\\\Cuatrimeste 7\\\\Programación Concurrente\\\\video\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "C:\\Users\\Gael Valdez\\OneDrive\\Documentos\\Gael Trabajos\\Cuatrimeste 7\\Programación Concurrente\\video\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "C:\\Users\\Gael Valdez\\OneDrive\\Documentos\\Gael Trabajos\\Cuatrimeste 7\\Programación Concurrente\\video",
      "filename": "C:\\Users\\Gael Valdez\\OneDrive\\Documentos\\Gael Trabajos\\Cuatrimeste 7\\Programación Concurrente\\video\\app.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "C:\\Users\\Gael Valdez\\OneDrive\\Documentos\\Gael Trabajos\\Cuatrimeste 7\\Programación Concurrente\\video",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "C:\\Users\\Gael Valdez\\OneDrive\\Documentos\\Gael Trabajos\\Cuatrimeste 7\\Programación Concurrente\\video\\app.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "C:\\Users\\Gael Valdez\\OneDrive\\Documentos\\Gael Trabajos\\Cuatrimeste 7\\Programación Concurrente\\video\\app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "C:\\Users\\Gael Valdez\\OneDrive\\Documentos\\Gael Trabajos\\Cuatrimeste 7\\Programación Concurrente\\video\\",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar bodyParser = _interopRequireWildcard(require(\"body-parser\"));\n\nvar path = _interopRequireWildcard(require(\"path\"));\n\nvar _multer = _interopRequireDefault(require(\"multer\"));\n\nvar _worker_threads = require(\"worker_threads\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nrequire('dotenv').config();\n\nconst storage = _multer.default.diskStorage({\n  destination: './uploads/',\n  filename: function (req, file, cb) {\n    cb(null, file.fieldname + '-' + Date.now() + path.extname(file.originalname));\n  }\n});\n\nconst upload = (0, _multer.default)({\n  dest: 'uploads',\n  storage: storage\n});\nconst app = (0, _express.default)();\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({\n  extended: false\n}));\napp.set(\"views\", path.join(__dirname, \"views\"));\napp.set(\"view engine\", \"hbs\");\napp.get(\"/\", (req, res) => {\n  res.render(\"index\");\n});\napp.post(\"/upload-video\", upload.single(\"ssvideo\"), (req, res) => {\n  if (_worker_threads.isMainThread) {\n    let thread = new _worker_threads.Worker(\"./threads/worker.js\", {\n      workerData: {\n        file: req.file.path,\n        filename: req.file.filename\n      }\n    });\n    thread.on(\"message\", data => {\n      res.download(data.file, req.file.filename);\n    });\n    thread.on(\"error\", err => {\n      console.log(\"Error en el thread\", err);\n    });\n    thread.on(\"exit\", code => {\n      if (code != 0) {\n        console('El hilo se detuvo con el código de salida: ${code}');\n      }\n    });\n  }\n});\nconst PORT = 8080;\napp.listen(PORT, () => {\n  console.log('El servidor inició por el puerto ${PORT}');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwic3RvcmFnZSIsIm11bHRlciIsImRpc2tTdG9yYWdlIiwiZGVzdGluYXRpb24iLCJmaWxlbmFtZSIsInJlcSIsImZpbGUiLCJjYiIsImZpZWxkbmFtZSIsIkRhdGUiLCJub3ciLCJwYXRoIiwiZXh0bmFtZSIsIm9yaWdpbmFsbmFtZSIsInVwbG9hZCIsImRlc3QiLCJhcHAiLCJ1c2UiLCJib2R5UGFyc2VyIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInNldCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJnZXQiLCJyZXMiLCJyZW5kZXIiLCJwb3N0Iiwic2luZ2xlIiwiaXNNYWluVGhyZWFkIiwidGhyZWFkIiwiV29ya2VyIiwid29ya2VyRGF0YSIsIm9uIiwiZGF0YSIsImRvd25sb2FkIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvZGUiLCJQT1JUIiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQjs7QUFFQSxNQUFNQyxPQUFPLEdBQUdDLGdCQUFPQyxXQUFQLENBQW1CO0FBQy9CQyxFQUFBQSxXQUFXLEVBQUUsWUFEa0I7QUFFL0JDLEVBQUFBLFFBQVEsRUFBRSxVQUFTQyxHQUFULEVBQWFDLElBQWIsRUFBa0JDLEVBQWxCLEVBQXFCO0FBQzlCQSxJQUFBQSxFQUFFLENBQUMsSUFBRCxFQUFPRCxJQUFJLENBQUNFLFNBQUwsR0FBaUIsR0FBakIsR0FBcUJDLElBQUksQ0FBQ0MsR0FBTCxFQUFyQixHQUFrQ0MsSUFBSSxDQUFDQyxPQUFMLENBQWFOLElBQUksQ0FBQ08sWUFBbEIsQ0FBekMsQ0FBRjtBQUNBO0FBSjhCLENBQW5CLENBQWhCOztBQU9BLE1BQU1DLE1BQU0sR0FBRyxxQkFBTztBQUFDQyxFQUFBQSxJQUFJLEVBQUMsU0FBTjtBQUFnQmYsRUFBQUEsT0FBTyxFQUFFQTtBQUF6QixDQUFQLENBQWY7QUFFQSxNQUFNZ0IsR0FBRyxHQUFFLHVCQUFYO0FBQ0FBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxVQUFVLENBQUNDLElBQVgsRUFBUjtBQUNBSCxHQUFHLENBQUNDLEdBQUosQ0FBUUMsVUFBVSxDQUFDRSxVQUFYLENBQXNCO0FBQUVDLEVBQUFBLFFBQVEsRUFBQztBQUFYLENBQXRCLENBQVI7QUFFQUwsR0FBRyxDQUFDTSxHQUFKLENBQVEsT0FBUixFQUFpQlgsSUFBSSxDQUFDWSxJQUFMLENBQVVDLFNBQVYsRUFBb0IsT0FBcEIsQ0FBakI7QUFDQVIsR0FBRyxDQUFDTSxHQUFKLENBQVEsYUFBUixFQUF1QixLQUF2QjtBQUVBTixHQUFHLENBQUNTLEdBQUosQ0FBUSxHQUFSLEVBQVksQ0FBQ3BCLEdBQUQsRUFBS3FCLEdBQUwsS0FBYTtBQUN0QkEsRUFBQUEsR0FBRyxDQUFDQyxNQUFKLENBQVcsT0FBWDtBQUNGLENBRkQ7QUFJQVgsR0FBRyxDQUFDWSxJQUFKLENBQVMsZUFBVCxFQUF5QmQsTUFBTSxDQUFDZSxNQUFQLENBQWMsU0FBZCxDQUF6QixFQUFrRCxDQUFDeEIsR0FBRCxFQUFLcUIsR0FBTCxLQUFXO0FBQ3pELE1BQUdJLDRCQUFILEVBQWdCO0FBRVosUUFBSUMsTUFBTSxHQUFHLElBQUlDLHNCQUFKLENBQVcscUJBQVgsRUFBaUM7QUFDMUNDLE1BQUFBLFVBQVUsRUFBQztBQUNQM0IsUUFBQUEsSUFBSSxFQUFFRCxHQUFHLENBQUNDLElBQUosQ0FBU0ssSUFEUjtBQUVQUCxRQUFBQSxRQUFRLEVBQUVDLEdBQUcsQ0FBQ0MsSUFBSixDQUFTRjtBQUZaO0FBRCtCLEtBQWpDLENBQWI7QUFPQTJCLElBQUFBLE1BQU0sQ0FBQ0csRUFBUCxDQUFVLFNBQVYsRUFBcUJDLElBQUQsSUFBUTtBQUN4QlQsTUFBQUEsR0FBRyxDQUFDVSxRQUFKLENBQWFELElBQUksQ0FBQzdCLElBQWxCLEVBQXdCRCxHQUFHLENBQUNDLElBQUosQ0FBU0YsUUFBakM7QUFDSCxLQUZEO0FBSUEyQixJQUFBQSxNQUFNLENBQUNHLEVBQVAsQ0FBVSxPQUFWLEVBQW1CRyxHQUFELElBQVE7QUFDdEJDLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG9CQUFaLEVBQWtDRixHQUFsQztBQUNILEtBRkQ7QUFJQU4sSUFBQUEsTUFBTSxDQUFDRyxFQUFQLENBQVUsTUFBVixFQUFrQk0sSUFBRCxJQUFRO0FBQ3JCLFVBQUdBLElBQUksSUFBRyxDQUFWLEVBQVk7QUFDUkYsUUFBQUEsT0FBTyxDQUFDLG9EQUFELENBQVA7QUFDSDtBQUNGLEtBSkg7QUFNQztBQUVSLENBMUJEO0FBNEJBLE1BQU1HLElBQUksR0FBRyxJQUFiO0FBQ1F6QixHQUFHLENBQUMwQixNQUFKLENBQVdELElBQVgsRUFBZ0IsTUFBSTtBQUNoQkgsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksMENBQVo7QUFDSCxDQUZEIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcR2FlbCBWYWxkZXpcXE9uZURyaXZlXFxEb2N1bWVudG9zXFxHYWVsIFRyYWJham9zXFxDdWF0cmltZXN0ZSA3XFxQcm9ncmFtYWNpw7NuIENvbmN1cnJlbnRlXFx2aWRlb1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XHJcbmltcG9ydCogYXMgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XHJcbmltcG9ydCogYXMgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xyXG5pbXBvcnQgeyBXb3JrZXIsIGlzTWFpblRocmVhZCwgd29ya2VyRGF0YX0gZnJvbSAnd29ya2VyX3RocmVhZHMnO1xyXG5cclxucmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XHJcblxyXG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcclxuICAgIGRlc3RpbmF0aW9uOiAnLi91cGxvYWRzLycsXHJcbiAgICBmaWxlbmFtZTogZnVuY3Rpb24ocmVxLGZpbGUsY2Ipe1xyXG4gICAgIGNiKG51bGwsIGZpbGUuZmllbGRuYW1lICsgJy0nK0RhdGUubm93KCkgKyBwYXRoLmV4dG5hbWUoZmlsZS5vcmlnaW5hbG5hbWUpKTsgICAgXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHtkZXN0Oid1cGxvYWRzJyxzdG9yYWdlOiBzdG9yYWdlIH0pO1xyXG5cclxuY29uc3QgYXBwPSBleHByZXNzKCk7XHJcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xyXG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOmZhbHNlIH0pKTtcclxuXHJcbmFwcC5zZXQoXCJ2aWV3c1wiLCBwYXRoLmpvaW4oX19kaXJuYW1lLFwidmlld3NcIikpO1xyXG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJoYnNcIik7XHJcblxyXG5hcHAuZ2V0KFwiL1wiLChyZXEscmVzKSA9PiB7XHJcbiAgIHJlcy5yZW5kZXIoXCJpbmRleFwiKTtcclxufSk7XHJcblxyXG5hcHAucG9zdChcIi91cGxvYWQtdmlkZW9cIix1cGxvYWQuc2luZ2xlKFwic3N2aWRlb1wiKSwocmVxLHJlcyk9PntcclxuICAgIGlmKGlzTWFpblRocmVhZCl7XHJcblxyXG4gICAgICAgIGxldCB0aHJlYWQgPSBuZXcgV29ya2VyKFwiLi90aHJlYWRzL3dvcmtlci5qc1wiLHtcclxuICAgICAgICAgICAgd29ya2VyRGF0YTp7XHJcbiAgICAgICAgICAgICAgICBmaWxlOiByZXEuZmlsZS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJlcS5maWxlLmZpbGVuYW1lXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhyZWFkLm9uKFwibWVzc2FnZVwiLChkYXRhKT0+e1xyXG4gICAgICAgICAgICByZXMuZG93bmxvYWQoZGF0YS5maWxlLCByZXEuZmlsZS5maWxlbmFtZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRocmVhZC5vbihcImVycm9yXCIsKGVycik9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZW4gZWwgdGhyZWFkXCIsIGVycik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRocmVhZC5vbihcImV4aXRcIiwoY29kZSk9PntcclxuICAgICAgICAgICAgaWYoY29kZSAhPTApe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZSgnRWwgaGlsbyBzZSBkZXR1dm8gY29uIGVsIGPDs2RpZ28gZGUgc2FsaWRhOiAke2NvZGV9Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG59KTtcclxuXHJcbmNvbnN0IFBPUlQgPSA4MDgwO1xyXG4gICAgICAgIGFwcC5saXN0ZW4oUE9SVCwoKT0+e1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRWwgc2Vydmlkb3IgaW5pY2nDsyBwb3IgZWwgcHVlcnRvICR7UE9SVH0nKTtcclxuICAgICAgICB9KTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "require",
        "config",
        "storage",
        "multer",
        "diskStorage",
        "destination",
        "filename",
        "req",
        "file",
        "cb",
        "fieldname",
        "Date",
        "now",
        "path",
        "extname",
        "originalname",
        "upload",
        "dest",
        "app",
        "use",
        "bodyParser",
        "json",
        "urlencoded",
        "extended",
        "set",
        "join",
        "__dirname",
        "get",
        "res",
        "render",
        "post",
        "single",
        "isMainThread",
        "thread",
        "Worker",
        "workerData",
        "on",
        "data",
        "download",
        "err",
        "console",
        "log",
        "code",
        "PORT",
        "listen"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAEA,MAAMC,OAAO,GAAGC,gBAAOC,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,EAAE,YADkB;AAE/BC,EAAAA,QAAQ,EAAE,UAASC,GAAT,EAAaC,IAAb,EAAkBC,EAAlB,EAAqB;AAC9BA,IAAAA,EAAE,CAAC,IAAD,EAAOD,IAAI,CAACE,SAAL,GAAiB,GAAjB,GAAqBC,IAAI,CAACC,GAAL,EAArB,GAAkCC,IAAI,CAACC,OAAL,CAAaN,IAAI,CAACO,YAAlB,CAAzC,CAAF;AACA;AAJ8B,CAAnB,CAAhB;;AAOA,MAAMC,MAAM,GAAG,qBAAO;AAACC,EAAAA,IAAI,EAAC,SAAN;AAAgBf,EAAAA,OAAO,EAAEA;AAAzB,CAAP,CAAf;AAEA,MAAMgB,GAAG,GAAE,uBAAX;AACAA,GAAG,CAACC,GAAJ,CAAQC,UAAU,CAACC,IAAX,EAAR;AACAH,GAAG,CAACC,GAAJ,CAAQC,UAAU,CAACE,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAC;AAAX,CAAtB,CAAR;AAEAL,GAAG,CAACM,GAAJ,CAAQ,OAAR,EAAiBX,IAAI,CAACY,IAAL,CAAUC,SAAV,EAAoB,OAApB,CAAjB;AACAR,GAAG,CAACM,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AAEAN,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAY,CAACpB,GAAD,EAAKqB,GAAL,KAAa;AACtBA,EAAAA,GAAG,CAACC,MAAJ,CAAW,OAAX;AACF,CAFD;AAIAX,GAAG,CAACY,IAAJ,CAAS,eAAT,EAAyBd,MAAM,CAACe,MAAP,CAAc,SAAd,CAAzB,EAAkD,CAACxB,GAAD,EAAKqB,GAAL,KAAW;AACzD,MAAGI,4BAAH,EAAgB;AAEZ,QAAIC,MAAM,GAAG,IAAIC,sBAAJ,CAAW,qBAAX,EAAiC;AAC1CC,MAAAA,UAAU,EAAC;AACP3B,QAAAA,IAAI,EAAED,GAAG,CAACC,IAAJ,CAASK,IADR;AAEPP,QAAAA,QAAQ,EAAEC,GAAG,CAACC,IAAJ,CAASF;AAFZ;AAD+B,KAAjC,CAAb;AAOA2B,IAAAA,MAAM,CAACG,EAAP,CAAU,SAAV,EAAqBC,IAAD,IAAQ;AACxBT,MAAAA,GAAG,CAACU,QAAJ,CAAaD,IAAI,CAAC7B,IAAlB,EAAwBD,GAAG,CAACC,IAAJ,CAASF,QAAjC;AACH,KAFD;AAIA2B,IAAAA,MAAM,CAACG,EAAP,CAAU,OAAV,EAAmBG,GAAD,IAAQ;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC;AACH,KAFD;AAIAN,IAAAA,MAAM,CAACG,EAAP,CAAU,MAAV,EAAkBM,IAAD,IAAQ;AACrB,UAAGA,IAAI,IAAG,CAAV,EAAY;AACRF,QAAAA,OAAO,CAAC,oDAAD,CAAP;AACH;AACF,KAJH;AAMC;AAER,CA1BD;AA4BA,MAAMG,IAAI,GAAG,IAAb;AACQzB,GAAG,CAAC0B,MAAJ,CAAWD,IAAX,EAAgB,MAAI;AAChBH,EAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;AACH,CAFD",
      "sourceRoot": "C:\\Users\\Gael Valdez\\OneDrive\\Documentos\\Gael Trabajos\\Cuatrimeste 7\\Programación Concurrente\\video\\",
      "sourcesContent": [
        "import express from 'express';\r\nimport* as bodyParser from 'body-parser';\r\nimport* as path from 'path';\r\nimport multer from 'multer';\r\nimport { Worker, isMainThread, workerData} from 'worker_threads';\r\n\r\nrequire('dotenv').config();\r\n\r\nconst storage = multer.diskStorage({\r\n    destination: './uploads/',\r\n    filename: function(req,file,cb){\r\n     cb(null, file.fieldname + '-'+Date.now() + path.extname(file.originalname));    \r\n    }\r\n});\r\n\r\nconst upload = multer({dest:'uploads',storage: storage });\r\n\r\nconst app= express();\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended:false }));\r\n\r\napp.set(\"views\", path.join(__dirname,\"views\"));\r\napp.set(\"view engine\", \"hbs\");\r\n\r\napp.get(\"/\",(req,res) => {\r\n   res.render(\"index\");\r\n});\r\n\r\napp.post(\"/upload-video\",upload.single(\"ssvideo\"),(req,res)=>{\r\n    if(isMainThread){\r\n\r\n        let thread = new Worker(\"./threads/worker.js\",{\r\n            workerData:{\r\n                file: req.file.path,\r\n                filename: req.file.filename\r\n            }\r\n        });\r\n\r\n        thread.on(\"message\",(data)=>{\r\n            res.download(data.file, req.file.filename);\r\n        });\r\n\r\n        thread.on(\"error\",(err)=> {\r\n            console.log(\"Error en el thread\", err);\r\n        });\r\n\r\n        thread.on(\"exit\",(code)=>{\r\n            if(code !=0){\r\n                console('El hilo se detuvo con el código de salida: ${code}');\r\n            }\r\n          })\r\n        \r\n        }\r\n        \r\n});\r\n\r\nconst PORT = 8080;\r\n        app.listen(PORT,()=>{\r\n            console.log('El servidor inició por el puerto ${PORT}');\r\n        });"
      ]
    },
    "sourceType": "script",
    "mtime": 1636685884495
  }
}